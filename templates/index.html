{{define "Index"}}

{{template "_head"}}

{{template "_menu"}}

<div class="container">
  <div class="card">
    <table class="table table-striped table-hover mb-0">
      <thead>
        <tr>
          <th>
            Nome
          </th>
          <th>
            Descrição
          </th>
          <th>
            Preço
          </th>
          <th>
            Quantidade
          </th>
        </tr>
      </thead>
      <tbody>
      <tbody>
        {{ range . }}
        <tr>
          <td>
            {{.Nome}}
          </td>
          <td>
            {{.Descricao}}
          </td>
          <td>
            {{.Preco}}
          </td>
          <td>
            {{.Quantidade}}
          </td>
          <td>
            <a href="/edit?id={{.Id}}" class="btn btn-info">Editar</a>
            <button onclick="onDelete('{{.Id}}')" class="btn btn-danger">Deletar</button>
          </td>
        </tr>
        {{end}}
      </tbody>
      </tbody>
    </table>
    <div class="card-footer text-right">
      <a href="/new" class="btn btn-primary">Adicionar produto</a>
    </div>
  </div>
</div>
</body>

<script>

  function onDelete(id) {
    let resposta = confirm("Tem certeza que você deseja deletar este produto?")
    if (resposta) {
      window.location = "/delete?id=" + id
    }
  }

</script>

</html>

{{end}}